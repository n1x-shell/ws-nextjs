@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --phosphor-green: #33ff33;
  --terminal-bg: #0a0a0a;
  --glow: #33ff33;
  --monitor-bezel: #1a1a1a;

  --text-base:   10px;   /* ~10pt — body / terminal output */
  --text-header: 12px;   /* ~12pt — section headings       */
}

/* ── CRITICAL: lock the page itself from ever scrolling ── */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

html {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: fixed;
  top: 0;
  left: 0;
  font-size: var(--text-base);   /* everything rem-based scales from here */
}

body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: fixed;
  top: 0;
  left: 0;
  background: #000;
  color: var(--phosphor-green);
  font-family: 'VT323', monospace;
  font-size: var(--text-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ── Scanlines ── */
@keyframes scanlines-move {
  from { transform: translateY(-50%) translateZ(0); }
  to   { transform: translateY(0%)   translateZ(0); }
}

@-webkit-keyframes scanlines-move {
  from { -webkit-transform: translateY(-50%) translateZ(0); }
  to   { -webkit-transform: translateY(0%)   translateZ(0); }
}

.scanlines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 200%;
  z-index: 999;
  pointer-events: none;
  background-image: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, 0)    0px,
    rgba(0, 0, 0, 0.5)  1px,
    rgba(0, 0, 0, 0)    2px
  );
  animation: scanlines-move 10s linear infinite;
  -webkit-animation: scanlines-move 10s linear infinite;
  opacity: 0.6;
  will-change: transform;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* ── Screen flicker ── */
@keyframes screen-flicker {
  0%,  100% { opacity: 1;    transform: translate(0,     0)     scale(1)     translateZ(0); }
  10%       { opacity: 0.93; transform: translate(-2px,  2px)   scale(1.002) translateZ(0); }
  20%       { opacity: 0.96; transform: translate( 2px, -2px)   scale(0.998) translateZ(0); }
  30%       { opacity: 0.94; transform: translate(-2px, -2px)   scale(1.002) translateZ(0); }
  40%       { opacity: 1;    transform: translate( 2px,  2px)   scale(0.998) translateZ(0); }
}

@-webkit-keyframes screen-flicker {
  0%,  100% { opacity: 1;    -webkit-transform: translate(0,     0)     scale(1)     translateZ(0); }
  10%       { opacity: 0.93; -webkit-transform: translate(-2px,  2px)   scale(1.002) translateZ(0); }
  20%       { opacity: 0.96; -webkit-transform: translate( 2px, -2px)   scale(0.998) translateZ(0); }
  30%       { opacity: 0.94; -webkit-transform: translate(-2px, -2px)   scale(1.002) translateZ(0); }
  40%       { opacity: 1;    -webkit-transform: translate( 2px,  2px)   scale(0.998) translateZ(0); }
}

.screen-content.glitch {
  animation: screen-flicker 0.2s ease !important;
  -webkit-animation: screen-flicker 0.2s ease !important;
}

/* ── RGB split glitch ── */
@keyframes rgb-split {
  0%,  100% { text-shadow: 0 0 2px var(--phosphor-green); }
  25%       { text-shadow: -3px 0 0 #ff0051,  3px 0 0 #00d4ff, 0 0 5px var(--phosphor-green); }
  50%       { text-shadow:  3px 0 0 #ff0051, -3px 0 0 #00d4ff, 0 0 5px var(--phosphor-green); }
  75%       { text-shadow: -2px 0 0 #ff0051,  2px 0 0 #00d4ff, 0 0 5px var(--phosphor-green); }
}

@-webkit-keyframes rgb-split {
  0%,  100% { text-shadow: 0 0 2px var(--phosphor-green); }
  25%       { text-shadow: -3px 0 0 #ff0051,  3px 0 0 #00d4ff, 0 0 5px var(--phosphor-green); }
  50%       { text-shadow:  3px 0 0 #ff0051, -3px 0 0 #00d4ff, 0 0 5px var(--phosphor-green); }
  75%       { text-shadow: -2px 0 0 #ff0051,  2px 0 0 #00d4ff, 0 0 5px var(--phosphor-green); }
}

.glitch-text {
  animation: rgb-split 0.3s ease !important;
  -webkit-animation: rgb-split 0.3s ease !important;
}

/* ── Status dot pulse ── */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.3; }
}

@-webkit-keyframes pulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.3; }
}

.status-dot {
  display: inline-block;
  width: 6px;
  height: 6px;
  background: var(--phosphor-green);
  border-radius: 50%;
  margin-right: 6px;
  box-shadow: 0 0 6px var(--phosphor-green);
  animation: pulse 2s ease-in-out infinite;
  -webkit-animation: pulse 2s ease-in-out infinite;
}

/* ── Cursor blink ── */
@keyframes blink {
  0%,  49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

@-webkit-keyframes blink {
  0%,  49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

.cursor {
  display: inline-block;
  width: 7px;
  height: 1em;
  background: var(--phosphor-green);
  margin-left: 3px;
  animation: blink 1s step-end infinite;
  -webkit-animation: blink 1s step-end infinite;
  vertical-align: text-bottom;
}

/* ── Scrollbar (only inside terminal pane) ── */
.shell-output::-webkit-scrollbar       { width: 4px; }
.shell-output::-webkit-scrollbar-track { background: transparent; }
.shell-output::-webkit-scrollbar-thumb { background: var(--phosphor-green); border-radius: 2px; }

/* ── Text glow ── */
.text-glow {
  text-shadow: 0 0 3px var(--phosphor-green);
}

.text-glow-strong {
  text-shadow:
    0 0 4px var(--phosphor-green),
    0 0 8px var(--phosphor-green);
}

/* ── iOS: force GPU layers on animated elements ── */
@supports (-webkit-touch-callout: none) {
  .scanlines,
  .screen-content {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}
